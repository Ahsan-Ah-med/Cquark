
   {% if request.path contains 'return_prime' %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
  
    
    //Hide return button if line item properties avalible
       function detectAjaxRequest() {
           var proxied = window.XMLHttpRequest.prototype.send;
           window.XMLHttpRequest.prototype.send = function() {
          //console.log( arguments );
          //Here is where you can add any code to process the request. 
          //If you want to pass the Ajax request object, pass the 'pointer' below
          var pointer = this

          var intervalId = window.setInterval(function(){
            if(pointer.readyState != 4){
              return;
            }

            if(pointer. responseURL.includes("https://admin.returnprime.com/customer/get-order")) {
               const obj = JSON.parse(pointer.responseText);
              checkTagAvalible(obj);
             
            }
            //Here is where you can add any code to process the response.
            //If you want to pass the Ajax request object, pass the 'pointer' below
            clearInterval(intervalId);

          }, 1);//I found a delay of 1 to be sufficient, modify it as you need.
          return proxied.apply(this, [].slice.call(arguments));
        };
      };
    function checkTagAvalible(obj) {      
      if(obj.order.shipping_address.country_code != "GB") {
        $('.fixed__btn').find('.next__btn').hide();
        $('.fixed__btn').find('.back__btn ').hide();
      }

    }
    
    if(window.location.href.includes('apps/return_prime/return') || window.location.href.includes('apps/return_prime/exchange') ) {
      detectAjaxRequest();
    }
 
  </script>
   {% endif %}